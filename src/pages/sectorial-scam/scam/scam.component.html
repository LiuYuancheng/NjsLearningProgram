<div class="p-d-flex p-flex-column p-m-2" class="main-container">
  <h2>Scam Analytics</h2>
  <div>
    <highcharts-chart 
      [Highcharts]="Highcharts"
      [options]="chartOptions"
      [(update)]="updateFlag"
      [oneToOne]="oneToOneFlag"
      style="width: 100%; height: 110px; display: block;">
    </highcharts-chart>
  </div>
  <div class="map-frame p-d-flex">
    <div class="sector-card p-mr-2 p-pt-2">
      <div class="p-grid wrap" *ngIf="data1">
        <app-scam-sector-card *ngFor="let sector of data1" class="p-col-6 p-m-0 p-p-1" [sector]="sector" (selectSector)="onSelectSector($event)">
        </app-scam-sector-card>
      </div>
    </div>
    <div id="map" class="p-as-stretch" style="position: relative;">    
      <div class="legend">
        <h3 style="text-align: center; margin-bottom: 2px;">Spam Count</h3>
        <table>
          <tbody>
            <tr *ngFor="let item of mapLegend">
              <td style="background-color: {{item.color}}; padding-right: 10px; padding-left: 10px;">{{item.label}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <p-dialog [(visible)]="selectedSector" [style]="{width: '80vw'}">
    <ng-template pTemplate="header">
      {{selectedSector.type}} : {{selectedSector.name}}
    </ng-template>
    <mat-tab-group>
      <mat-tab label="Scam Detail">
        <app-scam-sector-details [sector]="selectedSector"></app-scam-sector-details>
      </mat-tab>
      <mat-tab *ngIf="showSamGraph" label="Scam Graph">
        <p-card header="Connection graph" [style]="{'width': '1050px', 'height':'800px'}" styleClass="panel-background">
        </p-card>
      </mat-tab>
    </mat-tab-group>
  </p-dialog>
</div>
